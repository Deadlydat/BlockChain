@page
@model BCandSC_CSharp.Pages.PlayerSelectionModel
@{
    ViewData["Title"] = "Player Selection";
}

<form method="post">
    @{
        if (Model.team.Players.Count == 11)
        {
            <input type="submit" value="Test" asp-route-method="done" class="btn btn-primary" />
        }
    }
    <div class="field">
        <div class="field-headline">
            <label class="field-headline-coins">@Model.enviroment.Coins</label>&nbsp;
            <label class="field-headline-text">Coins verfügbar</label>
        </div>

        <div class="field-players @Model.team.Formation">

            @{
                string name = "";
                int id = 0;

                for (var i = 0; i < (int)Convert.ToUInt32(Model.team.Formation[3].ToString()); i++)
                {
                    id = 0;
                    name = "Name";
                    if (Model.team.Players.Where(_p => _p.Position == Player.PlayerPosition.Striker).Count() > i)
                    {
                        name = (Model.team.Players.Where(_p => _p.Position == Player.PlayerPosition.Striker).ToList()[i]).Name;
                        id = (Model.team.Players.Where(_p => _p.Position == Player.PlayerPosition.Striker).ToList()[i]).Id;
                    }

                    <div class="field-player">
                        <div class="field-player-picture">
                            <button class="field-player-button" asp-route-addtype="@Player.PlayerPosition.Striker.ToString()" asp-route-method="showcarousel"></button>
                        </div>
                        <div class="field-player-name">
                            <label>@name</label>
                        </div>
                        @if (@id > 0)
                        {
                            <button class="remove-player-button" asp-route-player="@id" asp-route-method="removeplayer"></button>
                        }
                    </div>
                }

                for (var i = 0; i < (int)Convert.ToUInt32(Model.team.Formation[2].ToString()); i++)
                {
                    id = 0;
                    name = "Name";
                    if (Model.team.Players.Where(_p => _p.Position == Player.PlayerPosition.Midfield).Count() > i)
                    {
                        name = (Model.team.Players.Where(_p => _p.Position == Player.PlayerPosition.Midfield).ToList()[i]).Name;
                        id = (Model.team.Players.Where(_p => _p.Position == Player.PlayerPosition.Midfield).ToList()[i]).Id;
                    }

                    <div class="field-player">
                        <div class="field-player-picture">
                            <button class="field-player-button" asp-route-addtype="@Player.PlayerPosition.Midfield.ToString()" asp-route-method="showcarousel"></button>
                        </div>
                        <div class="field-player-name">
                            <label>@name</label>
                        </div>
                        @if (@id > 0)
                        {
                            <button class="remove-player-button" asp-route-player="@id" asp-route-method="removeplayer"></button>
                        }
                    </div>
                }

                for (var i = 0; i < (int)Convert.ToUInt32(Model.team.Formation[1].ToString()); i++)
                {
                    id = 0;
                    name = "Name";
                    if (Model.team.Players.Where(_p => _p.Position == Player.PlayerPosition.Defense).Count() > i)
                    {
                        name = (Model.team.Players.Where(_p => _p.Position == Player.PlayerPosition.Defense).ToList()[i]).Name;
                        id = (Model.team.Players.Where(_p => _p.Position == Player.PlayerPosition.Defense).ToList()[i]).Id;
                    }

                    <div class="field-player">
                        <div class="field-player-picture">
                            <button class="field-player-button" asp-route-addtype="@Player.PlayerPosition.Defense.ToString()" asp-route-method="showcarousel"></button>
                        </div>
                        <div class="field-player-name">
                            <label>@name</label>
                        </div>
                        @if (@id > 0)
                        {
                            <button class="remove-player-button" asp-route-player="@id" asp-route-method="removeplayer"></button>
                        }
                    </div>
                }

                id = 0;
                name = "Name";
                if (Model.team.Players.Where(_p => _p.Position == Player.PlayerPosition.Goal).Count() > 0)
                {
                    name = (Model.team.Players.Where(_p => _p.Position == Player.PlayerPosition.Goal).ToList()[0]).Name;
                    id = (Model.team.Players.Where(_p => _p.Position == Player.PlayerPosition.Goal).ToList()[0]).Id;
                }

                <div class="field-player">
                    <div class="field-player-picture">
                        <button class="field-player-button" asp-route-addtype="@Player.PlayerPosition.Goal.ToString()" asp-route-method="showcarousel"></button>
                    </div>
                    <div class="field-player-name">
                        <label>@name</label>
                    </div>
                    @if (@id > 0)
                    {
                        <button class="remove-player-button" asp-route-player="@id" asp-route-method="removeplayer"></button>
                    }
                </div>
            }

        </div>

    </div>

    <div class="player-carousel">

        @{
            for (int i = 0; i < Model.CarouselPlayers.Count; i++)
            {
                <button class="card-button" asp-route-player="@Model.CarouselPlayers[i].Id" asp-route-method="addplayer">
                    <div class="player-card">
                        <div class="player-card-main">
                            <div class="player-name">
                                <label class="first-name">@Model.CarouselPlayers[i].Name</label>
                                <label class="last-name">@Model.CarouselPlayers[i].Name</label>
                            </div>
                            <div class="player-position">
                                <label class="jersey-number sub-text">7</label>
                                <label class="position sub-text">MF</label>
                            </div>
                            <div class="player-picture">
                                <img src="img/gnabry.jpg" alt="">
                            </div>
                        </div>
                        <div class="player-card-stats">
                            <div class="stat-box">
                                <label class="stat-value">146</label>
                                <label class="stat-name sub-text">Punkte</label>
                            </div>
                            <div class="stat-box">
                                <label class="stat-value">@Model.CarouselPlayers[i].Einsaetze</label>
                                <label class="stat-name sub-text">Einsätze</label>
                            </div>
                            <div class="stat-box">
                                <label class="stat-value">10</label>
                                <label class="stat-name sub-text">Fouls</label>
                            </div>
                            <div class="stat-box">
                                <label class="stat-value">0</label>
                                <label class="stat-name sub-text">Karten</label>
                            </div>
                            <div class="stat-box">
                                <label class="stat-value">@Model.CarouselPlayers[i].Tore</label>
                                <label class="stat-name sub-text">Tore</label>
                            </div>
                            <div class="stat-box">
                                <label class="stat-value">3</label>
                                <label class="stat-name sub-text">Assits</label>
                            </div>
                        </div>
                        <div class="player-card-points">
                            <label class="player-points">2.197</label>
                            <label class="points sub-text">Punkte</label>
                        </div>
                        <div class="player-card-value">
                            <label class="player-value">@Model.CarouselPlayers[i].Marktwert</label>
                            <label class="marketvalue sub-text">Marktwert</label>
                        </div>
                    </div>
                </button>
            }


        }

    </div>

</form>